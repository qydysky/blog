<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <title>命令行弹幕云实现 | qydysky&#39;s blog</title>
    <meta property="og:title" content="命令行弹幕云实现 - qydysky&#39;s blog">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2021-05-17T15:17:25&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2021-05-17T15:17:25&#43;08:00'>
        
    <meta name="Keywords" content="qydysky,blog">
    <meta name="description" content="命令行弹幕云实现">
        
    <meta name="author" content="qydysky">
    <meta property="og:url" content="/post/20210517danmu/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>

    
        <link rel="stylesheet" href="/main.15dcb265081424711307094b8e6324bd.css" integrity="md5-FdyyZQgUJHETBwlLjmMkvQ==">
    

    <script type="text/javascript" src="/js/jquery/3.6.0/jquery.min.js"></script>

    
        <script src="/main.1237e059eab46d4c84e9924e8e2ec11f.js" integrity="md5-EjfgWeq0bUyE6ZJOji7BHw=="></script>
    
    
    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="/">
                        qydysky&#39;s blog
                    </a>
                
                <p class="description">日常记录</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="/">首页</a>
                    
                    <a  href="/tags/" title="标签">标签</a>
                    
                    <a  href="/archives/" title="归档">归档</a>
                    
                    <a  href="/search/" title="查找">查找</a>
                    
                    <a  href="/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <article class="post">
        <header>
            <h1 class="post-title">命令行弹幕云实现</h1>
        </header>
        <date class="post-meta meta-date">
            2021年5月17日
        </date>
        
        
        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/c'>c</a></li>
                
                <li><a href='/tags/shell'>shell</a></li>
                
                <li><a href='/tags/ncurses'>ncurses</a></li>
                
            </ul>
            
        </div>
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">文章目录</div>
            </div>
        </div>
        
        <div class="post-content">
            <h3 id="简介">简介</h3>
<p>本文介绍了命令行弹幕云实现。会不定期更新。</p>
<h3 id="工具准备-ncurses">工具准备-ncurses</h3>
<p>工欲善其事，必先利其器。在网上了解了一番类似<code>nano</code>的实现之后，将编程语言瞄准了C。在<a href="https://www.cnblogs.com/lely/p/12188118.html">C语言小游戏&mdash;命令行飞船大战</a>中找到了可能实现的细节，但由于上述程序运行于win，在<a href="https://www.169it.com/tech-qa-linux/article-6682055612900685094.html">关于Linux下光标定位的问题！！！</a>中找到答案<code>ncurses</code>。</p>
<p>在上述网页中，有<a href="https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/intro.html">NCURSES Programming HOWTO</a>。于是开始学习。</p>
<h4 id="坑-第一个用例无法实现">坑-第一个用例无法实现</h4>
<p>对于我这种初学者，第一个用例就无法正常跑起来。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#0086b3">echo</span> <span style="color:#d14">&#34;^[[0;31;40mIn Color&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>它显示了文字<code>^[[0;31;40mIn Color</code>。解决的办法很简单，见<a href="https://forums.gentoo.org/viewtopic-t-352998-start-0.html">How to printf() with colors? [solved]</a>。其实在文中也有提到这个问题。使用<code>press CTRL+V and then the ESC key</code>来打出<code>^[</code>，而非复制粘贴。</p>
<pre tabindex="0"><code>which looks like two characters ^ and [.To be able to print it, you have to press CTRL+V and then the ESC key
</code></pre><h4 id="ncurses首接触-hello-world">ncurses首接触-Hello world</h4>
<p>在<a href="http://ftp.wayne.edu/gnu/ncurses/">安装</a>了<code>ncurses</code>后，开始首个用例。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;ncurses.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{	
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">initscr</span>();			<span style="color:#998;font-style:italic">/* Start curses mode 		  */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">printw</span>(<span style="color:#d14">&#34;Hello World !!!&#34;</span>);	<span style="color:#998;font-style:italic">/* Print Hello World		  */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">refresh</span>();			<span style="color:#998;font-style:italic">/* Print it on to the real screen */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">getch</span>();			<span style="color:#998;font-style:italic">/* Wait for user input */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">endwin</span>();			<span style="color:#998;font-style:italic">/* End curses mode		  */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>initscr();</strong> 开始光标模式</li>
<li><strong>refresh();</strong> 输出缓冲区到屏幕</li>
<li><strong>endwin();</strong> 结束光标模式</li>
</ul>
<p>程序比较简单，此处不展开叙述，详细解读点<a href="https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/helloworld.html">此</a>。</p>
<h4 id="ncurses初始化功能">ncurses初始化功能</h4>
<p>在初始化中，有许多好用的功能，见下例</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;ncurses.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{	<span style="color:#458;font-weight:bold">int</span> ch;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">initscr</span>();			<span style="color:#998;font-style:italic">/* Start curses mode 		*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">raw</span>();				<span style="color:#998;font-style:italic">/* Line buffering disabled	*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">keypad</span>(stdscr, TRUE);		<span style="color:#998;font-style:italic">/* We get F1, F2 etc..		*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">noecho</span>();			<span style="color:#998;font-style:italic">/* Don&#39;t echo() while we do getch */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    	<span style="color:#900;font-weight:bold">printw</span>(<span style="color:#d14">&#34;Type any character to see it in bold</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>);
</span></span><span style="display:flex;"><span>	ch <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">getch</span>();			<span style="color:#998;font-style:italic">/* If raw() hadn&#39;t been called
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">					 * we have to press enter before it
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">					 * gets to the program 		*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">if</span>(ch <span style="color:#000;font-weight:bold">==</span> <span style="color:#900;font-weight:bold">KEY_F</span>(<span style="color:#099">1</span>))		<span style="color:#998;font-style:italic">/* Without keypad enabled this will */</span>
</span></span><span style="display:flex;"><span>		<span style="color:#900;font-weight:bold">printw</span>(<span style="color:#d14">&#34;F1 Key pressed&#34;</span>);<span style="color:#998;font-style:italic">/*  not get to us either	*/</span>
</span></span><span style="display:flex;"><span>					<span style="color:#998;font-style:italic">/* Without noecho() some ugly escape
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">					 * charachters might have been printed
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">					 * on screen			*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>	{	<span style="color:#900;font-weight:bold">printw</span>(<span style="color:#d14">&#34;The pressed key is &#34;</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#900;font-weight:bold">attron</span>(A_BOLD);
</span></span><span style="display:flex;"><span>		<span style="color:#900;font-weight:bold">printw</span>(<span style="color:#d14">&#34;%c&#34;</span>, ch);
</span></span><span style="display:flex;"><span>		<span style="color:#900;font-weight:bold">attroff</span>(A_BOLD);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">refresh</span>();			<span style="color:#998;font-style:italic">/* Print it on to the real screen */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">getch</span>();			<span style="color:#998;font-style:italic">/* Wait for user input */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">endwin</span>();			<span style="color:#998;font-style:italic">/* End curses mode		  */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>stdscr</strong> 默认窗口</li>
<li><strong>raw();</strong> 获取原始输入</li>
<li><strong>keypad(stdscr, TRUE);</strong> 捕获F类按键</li>
<li><strong>noecho();</strong> 不显示输入的字符</li>
</ul>
<p>程序比较简单，此处不展开叙述，详细解读点<a href="https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/init.html">此</a>。</p>
<h4 id="ncurses的多种打印方式">ncurses的多种打印方式</h4>
<p>ncurses的3种打印方式，<code>addch()</code>，<code>printw()</code>，<code>addstr()</code>。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;ncurses.h&gt;			/* ncurses.h includes stdio.h */  </span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;string.h&gt; </span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span> 
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> mesg[]<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Just a string&#34;</span>;		<span style="color:#998;font-style:italic">/* message to be appeared on the screen */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> row,col;				<span style="color:#998;font-style:italic">/* to store the number of rows and *
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">                        * the number of colums of the screen */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">initscr</span>();				<span style="color:#998;font-style:italic">/* start the curses mode */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">getmaxyx</span>(stdscr,row,col);		<span style="color:#998;font-style:italic">/* get the number of rows and columns */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">mvprintw</span>(row<span style="color:#000;font-weight:bold">/</span><span style="color:#099">2</span>,(col<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">strlen</span>(mesg))<span style="color:#000;font-weight:bold">/</span><span style="color:#099">2</span>,<span style="color:#d14">&#34;%s&#34;</span>,mesg);
</span></span><span style="display:flex;"><span>                                    <span style="color:#998;font-style:italic">/* print the message at the center of the screen */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">mvprintw</span>(row<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>,<span style="color:#099">0</span>,<span style="color:#d14">&#34;This screen has %d rows and %d columns</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,row,col);
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">printw</span>(<span style="color:#d14">&#34;Try resizing your window(if possible) and then run this program again&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">refresh</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">getch</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">endwin</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>addch类
<ul>
<li><strong>addch(ch);</strong> 输出单字符</li>
<li>mvaddch(row,col,ch); 到某坐标后输出单字符</li>
<li>waddch(WINDOW *win, chtype ch); 到某窗口输出单字符</li>
<li>mvwaddch(WINDOW *win, int y, int x, chtype ch); 到某窗口、某坐标后输出单字符</li>
</ul>
</li>
<li>printw类
<ul>
<li><strong>printw()</strong> 输出格式化字符串</li>
<li>mvprintw() 到某坐标后输出格式化字符串</li>
<li>wprintw() 到某窗口输出格式化字符串</li>
<li>mvwprintw() 到某窗口、某坐标后输出格式化字符串</li>
<li>vwprintw() 到某窗口输出格式化字符串(数组输入)</li>
</ul>
</li>
<li>addstr类
<ul>
<li><strong>addstr()</strong> 等同对字符串每个字符调用addch</li>
<li>mvaddstr() 同上类似</li>
<li>waddstr() 同上类似</li>
<li>mvwaddstr() 同上类似</li>
</ul>
</li>
</ul>
<p>程序比较简单，此处不展开叙述，详细解读点<a href="https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/printw.html">此</a>。</p>
<h4 id="ncurses的多种输入方式">ncurses的多种输入方式</h4>
<p>ncurses有3种输入方式，<code>getch()</code>获取一个字符，<code>scanw()</code>，<code>getstr()</code>获取直到EOF的字符串。</p>
<ul>
<li>scanw类
<ul>
<li>scanw() 格式化输入</li>
<li>mvscanw() 到某位置后格式化输入</li>
<li>wscanw() 到某窗口后格式化输入</li>
<li>mvwscanw() 同上类似</li>
<li>vwscanw() 同上类似</li>
</ul>
</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;ncurses.h&gt;			/* ncurses.h includes stdio.h */  </span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;string.h&gt; </span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span> 
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> mesg[]<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Enter a string: &#34;</span>;		<span style="color:#998;font-style:italic">/* message to be appeared on the screen */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> str[<span style="color:#099">80</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> row,col;				<span style="color:#998;font-style:italic">/* to store the number of rows and *
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">                        * the number of colums of the screen */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">initscr</span>();				<span style="color:#998;font-style:italic">/* start the curses mode */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">getmaxyx</span>(stdscr,row,col);		<span style="color:#998;font-style:italic">/* get the number of rows and columns */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">mvprintw</span>(row<span style="color:#000;font-weight:bold">/</span><span style="color:#099">2</span>,(col<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">strlen</span>(mesg))<span style="color:#000;font-weight:bold">/</span><span style="color:#099">2</span>,<span style="color:#d14">&#34;%s&#34;</span>,mesg);
</span></span><span style="display:flex;"><span>                            <span style="color:#998;font-style:italic">/* print the message at the center of the screen */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">getstr</span>(str);
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">mvprintw</span>(LINES <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">2</span>, <span style="color:#099">0</span>, <span style="color:#d14">&#34;You Entered: %s&#34;</span>, str);
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">getch</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">endwin</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>程序比较简单，此处不展开叙述，详细解读点<a href="https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/scanw.html">此</a>。</p>
<h4 id="ncurses输出装饰">ncurses输出装饰</h4>
<p>下面列出一些常用的装饰属性。多属性使用<code>|</code>并。</p>
<pre tabindex="0"><code>    A_NORMAL        标准 Normal display (no highlight)
    A_STANDOUT      突出 Best highlighting mode of the terminal.
    A_UNDERLINE     下划 Underlining
    A_REVERSE       翻转 Reverse video
    A_BLINK         闪烁 Blinking
    A_DIM           半亮 Half bright
    A_BOLD          超亮 Extra bright or bold
    A_PROTECT       保护 Protected mode
    A_INVIS         隐藏 Invisible or blank mode
    A_ALTCHARSET    备用 Alternate character set
    A_CHARTEXT      Bit-mask to extract a character
    COLOR_PAIR(n)   颜色 Color-pair number n 
</code></pre><p>下面列出一些<strong>常见功能</strong>。</p>
<ul>
<li>attron() 打开某些装饰</li>
<li>attroff() 关闭某些装饰</li>
<li>attrset() 设置为某些装饰</li>
<li>standend() 清除装饰</li>
<li>attr_get() 获取装饰</li>
<li>attr_前置 基本同上</li>
<li>w前置 针对特定窗口</li>
</ul>
<p>*<em>chgat(int n, attr_t attr, short color, const void <em>opts)</em></em></p>
<ul>
<li>n 为应用的字符数量，为-1时到行尾为止。</li>
<li>const 总为<code>NULL</code></li>
</ul>
<p><code>chgat</code>在设置装饰时不会移动光标位置。有<code>w</code>、<code>mv</code>、<code>mvw</code>前缀，意义同上。</p>
<p>一个<code>chgat</code>的例子。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;ncurses.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">int</span> argc, <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>argv[])
</span></span><span style="display:flex;"><span>{	<span style="color:#900;font-weight:bold">initscr</span>();			<span style="color:#998;font-style:italic">/* Start curses mode 		*/</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">start_color</span>();			<span style="color:#998;font-style:italic">/* Start color functionality	*/</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">init_pair</span>(<span style="color:#099">1</span>, COLOR_CYAN, COLOR_BLACK);
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">printw</span>(<span style="color:#d14">&#34;A Big string which i didn&#39;t care to type fully &#34;</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">mvchgat</span>(<span style="color:#099">0</span>, <span style="color:#099">0</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>, A_BLINK, <span style="color:#099">1</span>, <span style="color:#0086b3">NULL</span>);	
</span></span><span style="display:flex;"><span>	<span style="color:#998;font-style:italic">/* 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * First two parameters specify the position at which to start 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * Third parameter number of characters to update. -1 means till 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * end of line
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * Forth parameter is the normal attribute you wanted to give 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * to the charcter
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * Fifth is the color index. It is the index given during init_pair()
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * use 0 if you didn&#39;t want color
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 * Sixth one is always NULL 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">refresh</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">getch</span>();
</span></span><span style="display:flex;"><span>	<span style="color:#900;font-weight:bold">endwin</span>();			<span style="color:#998;font-style:italic">/* End curses mode		  */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>程序比较简单，此处不展开叙述，详细解读点<a href="https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/attrib.html">此</a>。</p>
<h4 id="ncurses的窗口">ncurses的窗口</h4>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="/">qydysky</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="/post/20210517danmu/">/post/20210517danmu/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2 class="related-title">更多</h2>
    <ul class="listing">
        
        <li><a href="/post/20210504idea/">一些新点子</a></li>
        
        <li><a href="/post/20210425golang/">golang笔记</a></li>
        
        <li><a href="/post/20210421kde/">Kde应用内链接打开</a></li>
        
        <li><a href="/post/20210416flv-golang/">flv文件解析及golang的流实现</a></li>
        
        <li><a href="/post/20210406aria2/">aria2缓冲区</a></li>
        
    </ul>
</div>


    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2024 <a href="/">qydysky&#39;s blog By qydysky</a>
        
    </div>
    <br />
    <div>
        <a href="https://icp.gov.moe/?keyword=20240909" target="_blank">萌ICP备20240909号</a>
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='/js/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>






                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="/tags/Caddy/">Caddy</a>
    
    <a href="/tags/amixer/">amixer</a>
    
    <a href="/tags/ap/">ap</a>
    
    <a href="/tags/aria2/">aria2</a>
    
    <a href="/tags/c/">c</a>
    
    <a href="/tags/canvas/">canvas</a>
    
    <a href="/tags/certbot/">certbot</a>
    
    <a href="/tags/crontab/">crontab</a>
    
    <a href="/tags/docker/">docker</a>
    
    <a href="/tags/ffmpeg/">ffmpeg</a>
    
    <a href="/tags/flv/">flv</a>
    
    <a href="/tags/fmp4/">fmp4</a>
    
    <a href="/tags/frp/">frp</a>
    
    <a href="/tags/gateway/">gateway</a>
    
    <a href="/tags/golang/">golang</a>
    
    <a href="/tags/hexo/">hexo</a>
    
    <a href="/tags/javascript/">javascript</a>
    
    <a href="/tags/kde/">kde</a>
    
    <a href="/tags/kioexec/">kioexec</a>
    
    <a href="/tags/l4d2/">l4d2</a>
    
    <a href="/tags/legado/">legado</a>
    
    <a href="/tags/letsencrypt/">letsencrypt</a>
    
    <a href="/tags/linux/">linux</a>
    
    <a href="/tags/mock/">mock</a>
    
    <a href="/tags/mp4/">mp4</a>
    
    <a href="/tags/mysql/">mysql</a>
    
    <a href="/tags/ncurses/">ncurses</a>
    
    <a href="/tags/nodejs/">nodejs</a>
    
    <a href="/tags/nvm/">nvm</a>
    
    <a href="/tags/oracle/">oracle</a>
    
    <a href="/tags/plugin/">plugin</a>
    
    <a href="/tags/pocketbase/">pocketbase</a>
    
    <a href="/tags/regExp/">regExp</a>
    
    <a href="/tags/sh/">sh</a>
    
    <a href="/tags/shell/">shell</a>
    
    <a href="/tags/snap/">snap</a>
    
    <a href="/tags/sourcemod/">sourcemod</a>
    
    <a href="/tags/spring/">spring</a>
    
    <a href="/tags/truenas/">truenas</a>
    
    <a href="/tags/url/">url</a>
    
    <a href="/tags/vs/">vs</a>
    
    <a href="/tags/vue-element-admin/">vue-element-admin</a>
    
    <a href="/tags/wifi7/">wifi7</a>
    
    <a href="/tags/xiaomi/">xiaomi</a>
    
    <a href="/tags/%E6%97%A5%E5%B8%B8/">日常</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://vcb-s.com/" title="VCB-Studio">VCB-Studio</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="/index.xml">文章 RSS</a></li>
        </ul>
    </section>

    <style type="text/css">
    .post-toc {
        max-width: 100%;
        max-height: 80%;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        word-wrap: break-word;
        white-space: nowrap;
        z-index: 999;
        cursor: pointer;
    }

    .post-toc .post-toc-title {
        color: #6E7173;
        line-height: 2.7;
        margin-top: 0;
        font-size: 16px;
        border-bottom: 1px solid #ddd;
        display: block;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
        margin-block: 0.5rem;
        padding-inline: 0.1rem;
    }

    .post-toc .post-toc-content ul {
        list-style: none;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        font-size: 0.8rem;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc">
    <h2 class="post-toc-title">目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#简介">简介</a></li>
            <li><a href="#工具准备-ncurses">工具准备-ncurses</a>
              <ul>
                <li><a href="#坑-第一个用例无法实现">坑-第一个用例无法实现</a></li>
                <li><a href="#ncurses首接触-hello-world">ncurses首接触-Hello world</a></li>
                <li><a href="#ncurses初始化功能">ncurses初始化功能</a></li>
                <li><a href="#ncurses的多种打印方式">ncurses的多种打印方式</a></li>
                <li><a href="#ncurses的多种输入方式">ncurses的多种输入方式</a></li>
                <li><a href="#ncurses输出装饰">ncurses输出装饰</a></li>
                <li><a href="#ncurses的窗口">ncurses的窗口</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "unset",
                        top: "unset",
                        overflow: "unset",
                        paddingRight: "unset"
                    },
                    process: {
                        position: "fixed",
                        top: 20,
                        overflow: "hidden auto",
                        paddingRight: "5em"
                    },
                };

            var e = $(window).scrollTop();
            e < t ? postToc.css(a.start) : postToc.css(a.process)

            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    
</div>
            </div>
        </div>
    </div>
</body>

</html>